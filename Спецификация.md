
# Информационная система для эффективной обработки заявок на участие в телешоу

## Вводные данные:

Компания «Мир загадок» занимается проведением телевизионной игры «Загадки». Используя метод мозгового штурма, команда игроков ищет в течение двух минут правильный ответ на загадку телезрителя. За правильный ответ очко получает команда игроков, за неправильный же очко получают их противники — команда телезрителей. Побеждает команда, первой набравшая семь очков.

Загадки, которые присылают телезрители, могут быть простые, средней сложности и сложные. Всего в игре участвует 13 загадок, из них 4 простого, 4 среднего, 4 сложного и 1 неизвестного уровня сложности (может быть простой, средней или сложной). Уровень сложности загадки определяет специалист по загадкам, когда они поступают от телезрителей. Загадки хранятся в базе загадок.

Игра проходит каждую неделю по пятницам в прямом эфире на телеканале Загадочный.

Предполагается, что в системе должны быть учтены следующие роли пользователей:
- **Телезритель** – пользователь, который создает заявку с загадкой.
- **Оператор** – пользователь, который проверяет заявку на корректность (ФИО, контактные данные автора).
- **Специалист по загадкам** – пользователь, который проверяет корректность формулировки загадки и ответа и устанавливает уровень сложности загадки.    
- **Ведущий** – пользователь, который запускает процесс отбора загадок на игру и отмечает, кто выиграл вопрос: телезритель или команда игроков.

Должно выполняться **бизнес правило**: перед регистрацией телезритель должен дать согласие на обработку своих персональных данных.

---

# 1. Цели проекта

## Цели проекта:
- В течение 6 месяцев с момента старта проекта разработать и внедрить информационную систему для автоматизации процесса приема, проверки, классификации загадок и учета результатов игры.
- В течение 1 месяца после внедрения системы обеспечить ее стабильную работу в режиме реального времени с временем отклика, не превышающим 2 секунды для всех операций.
- В течение 1 месяца после внедрения системы обучить 100% сотрудников (операторов, специалистов по загадкам, ведущих) работе с новыми инструментами.

## Этапы проекта:
### 1. Анализ
1. **Сбор и анализ потребностей заказчика:**  
    Изучить требования компании «Мир загадок» к системе для проведения игры «Загадки», включая функциональность для телезрителей, операторов, специалистов по загадкам и ведущих.
2. **Определение функциональных и нефункциональных требований**:  
    Сформулировать требования к системе, такие как прием загадок от телезрителей, проверка данных, классификация загадок, учет результатов игры и обеспечение согласия на обработку персональных данных.
3. **Документирование требований**:  
    Создать документ с подробным описанием требований к системе, включая роли пользователей и их взаимодействие с системой.
### 2. Проектирование:
1. **Проектирование базы данных**:  
    Разработать структуру базы данных для хранения загадок, данных телезрителей, результатов игры и другой необходимой информации.
2. **Создание макетов интерфейсов**:  
    Разработать макеты интерфейсов для каждой роли пользователей (телезрители, операторы, специалисты по загадкам, ведущие).
3. **Построение диаграмм**:  
    Use Case диаграмма: Описать основные сценарии использования системы, такие как подача загадки, проверка данных, классификация загадки, запуск игры и учет результатов.
### 3. Разработка
1. **Создание технической документации**:  
    Подготовить подробные технические спецификации, учитывающие требования заказчика, такие как функциональность для каждой роли пользователей и бизнес- правила (например, согласие на обработку данных).
2. **Разработка функциональностей**:  
    Модуль для телезрителей: подача загадок и согласие на обработку данных.  
    Модуль для операторов: проверка данных телезрителей.  
    Модуль для специалистов по загадкам: классификация загадок по уровню сложности.  
    Модуль для ведущих: управление игрой и учет результатов.
3. **Решение технических проблем**:  
    Обеспечить безопасность данных, оптимизировать производительность системы и реализовать сложные функциональности, такие как обработка загадок неизвестного уровня сложности.
### 4. Тестирование:
1. **Планирование тестовых сценариев**:  
    Разработать тестовые сценарии для проверки функциональности системы, включая подачу загадок, их проверку, классификацию и учет результатов.
2. **Выявление и исправление дефектов**:  
    Провести тестирование системы, выявить ошибки и взаимодействовать с разработчиками для их устранения.
3. **Тестирование производительности**:  
    Убедиться, что система способна обрабатывать большое количество загадок и запросов, особенно во время прямого эфира.
### 5. Внедрение:
1. **Подготовка плана внедрения**:  
    Разработать план внедрения системы, включая установку на серверы телеканала и обучение сотрудников.
2. **Обучение пользователей**:  
    Провести обучение операторов, специалистов по загадкам и ведущих работе с системой.
3. **Анализ обратной связи**:  
    Собрать отзывы от пользователей и внести необходимые улучшения перед запуском системы в эксплуатацию.
### 6. Поддержка и сопровождение:
1. **Реагирование на запросы пользователей**:  
    Обрабатывать запросы и проблемы, связанные с использованием системы, от телезрителей и сотрудников.
2. **Внесение улучшений**:  
    Регулярно обновлять систему на основе обратной связи пользователей, например, добавлять новые функции или улучшать интерфейс.
3. **Мониторинг производительности**:  
    Контролировать стабильность работы системы, особенно во время прямого эфира, и предотвращать возможные сбои.
4. **Обновление документации**:  
    Поддерживать актуальность документации системы для облегчения работы пользователей и новых сотрудников.

## Критерии успешного завершения проекта:
1. Система используется всеми участниками (телезрители, операторы, специалисты по загадкам, ведущие) для выполнения своих задач.
2. Точность классификации загадок по уровню сложности достигает 95%, а ошибки в обработке заявок сокращаются до минимума.
3. В первые 3 месяца после внедрения количество критических ошибок и сбоев не превышает 2 случаев.
4. Система обеспечивает безопасное хранение и обработку персональных данных телезрителей, включая обязательное получение согласия.
5. Уровень юзабилити системы оценивается как минимум на среднем уровне, а интерфейсы интуитивно понятны для всех пользователей.
6. Аудитория программы увеличивается на 20%, а время подготовки к игре сокращается на 50% в течение первых 6 месяцев после внедрения.

2. Концепция и границы

# Бизнес-требования
## 2.1. Исходные данные
### Описание организации:
- **Название организации:** «Мир загадок».
- **Основная деятельность:** Проведение телевизионной игры «Загадки», в которой команда игроков соревнуется с командой телезрителей, разгадывая загадки различной сложности. Игра проходит в прямом эфире на телеканале «Загадочный» каждую неделю по пятницам.
- **Контекст:** Команда игроков использует метод мозгового штурма для поиска правильного ответа на загадку в течение двух минут. За правильный ответ команда игроков получает очко, за неправильный — очко получает команда телезрителей. Побеждает команда, первой набравшая семь очков. Загадки, присылаемые телезрителями, могут быть простыми, средней сложности или сложными. В игре участвует 13 загадок: 4 простых, 4 средних, 4 сложных и 1 загадка неизвестного уровня сложности. Уровень сложности загадки определяется специалистом по загадкам. Все загадки хранятся в базе данных.
### Обоснование реализации продукта:
- Для эффективного проведения игры и управления загадками необходимо разработать информационную систему, которая будет хранить и классифицировать загадки, а также помогать в организации игрового процесса.
- Система должна обеспечивать удобный доступ к базе загадок, возможность их классификации по уровню сложности и быстрого выбора загадок для игры.
- Уникальной особенностью системы является возможность интеграции с телевизионным эфиром, что позволит автоматизировать процесс выбора загадок и отображения их на экране.
### Сравнительная оценка существующих продуктов и возможных решений:
- Существующие системы управления контентом не всегда подходят для специфики телевизионных игр, таких как «Загадки».
- Разрабатываемая информационная система будет учитывать особенности игры, включая классификацию загадок, управление игровым процессом и интеграцию с телевизионным эфиром.
- Уникальной особенностью системы является возможность автоматического выбора загадок в зависимости от уровня сложности и текущего счета игры, что повышает динамичность и зрелищность передачи.

## 2.2. Бизнес-цели и критерии успеха
### Бизнес-цели:
- В течение 6 месяцев с момента старта проекта разработать и внедрить информационную систему для автоматизации процесса приема, проверки, классификации загадок и учета результатов игры.
- В течение 1 месяца после внедрения системы обеспечить ее стабильную работу в режиме реального времени с временем отклика, не превышающим 2 секунды для всех операций.
- В течение 1 месяца после внедрения системы обучить 100% сотрудников (операторов, специалистов по загадкам, ведущих) работе с новыми инструментами.
### Критерии успеха:
1. Система используется всеми участниками (телезрители, операторы, специалисты по загадкам, ведущие) для выполнения своих задач.
2. Точность классификации загадок по уровню сложности достигает 95%, а ошибки в обработке заявок сокращаются до минимума.
3. В первые 3 месяца после внедрения количество критических ошибок и сбоев не превышает 2 случаев.
4. Система обеспечивает безопасное хранение и обработку персональных данных телезрителей, включая обязательное получение согласия.
5. Уровень юзабилити системы оценивается как минимум на среднем уровне, а интерфейсы интуитивно понятны для всех пользователей.
6. Аудитория программы увеличивается на 20%, а время подготовки к игре сокращается на 50% в течение первых 6 месяцев после внедрения.

## 2.3 Общее описание концепции и основных функций продукта
### Кто будет покупать этот продукт?
- **Владельцы телешоу «Загадки» -** финансируют разработку и внедрение информационной системы, которая будет использоваться для управления процессом игры, включая обработку загадок, управление игровым процессом и взаимодействие с телезрителями.
### Кто будет использовать продукт?
- **Телезрители -** будут использовать продукт для отправки загадок и участия в игре.
- **Операторы -** будут проверять заявки на корректность данных телезрителей.
- **Специалисты по загадкам -** будут оценивать корректность загадок и устанавливать их уровень сложности.
- **Ведущий -** будет управлять процессом игры, включая выбор загадок и определение победителей.
### Каким потребностям будет отвечать продукт? Какую ценность он создает?
- **Телезрители:**
    - **Отправка загадок:** телезрители могут легко отправлять свои загадки через систему.
    - **Участие в игре:** телезрители могут следить за игрой и видеть, как их загадки используются в эфире.
- **Операторы:**
    - **Проверка заявок:** операторы могут быстро проверять корректность данных телезрителей, что ускоряет процесс обработки загадок.
- **Специалисты по загадкам:**
    - **Оценка загадок:** специалисты могут легко оценивать корректность загадок и устанавливать их уровень сложности.
- **Ведущий:**
    - **Управление игрой:** ведущий может выбирать загадки для игры и отмечать результаты, что делает процесс игры более организованным и динамичным.

**Вывод:** без данной информационной системы все перечисленные действия будут невозможны.

### Какие свойства необходимы для успеха продукта?
- Интеграция системы в процесс телешоу.
- Обеспечение высокой степени безопасности данных телезрителей.
- Простой и понятный интерфейс для всех типов пользователей.
- Удобный и функциональный процесс управления загадками.
- Гарантированная работоспособность и минимальное количество сбоев.

### Каковы его преимущества на фоне аналогов или конкурентов?
- **Удобство для телезрителей:** возможность легко отправлять загадки и следить за их использованием в игре.
- **Эффективность для операторов и специалистов:** быстрая проверка и оценка загадок.
- **Организация для ведущего:** удобное управление процессом игры и выбором загадок.
- **Интеграция с телевизионным эфиром:** автоматизация процесса отображения загадок и результатов на экране.

### Типы пользователей:
1. **Телезрители -** физические лица, отправляющие загадки и участвующие в игре.
2. **Операторы -** физические лица, проверяющие корректность данных телезрителей.
3. **Специалисты по загадкам -** физические лица, оценивающие загадки и устанавливающие их уровень сложности.
4. **Ведущий -** физическое лицо, управляющее процессом игры.

**Шаги телезрителя:**
1. Телезритель регистрируется в системе, давая согласие на обработку персональных данных.
2. Телезритель отправляет загадку через систему.
3. Телезритель следит за игрой и видит, как его загадка используется в эфире.

**Шаги оператора:**
1. Оператор проверяет заявку на корректность данных телезрителя.
2. Оператор подтверждает, корректирует или отклоняет заявку.

**Шаги специалиста по загадкам:**
1. Специалист проверяет корректность загадки и ответа.
2. Специалист устанавливает уровень сложности загадки.

**Шаги ведущего:**
1. Ведущий выбирает загадки для игры.
2. Ведущий отмечает результаты игры, определяя победителя.

**На основании описания пункта 2.3 сформулируем первоначальный список функционала будущей информационной системы:**

**Для телезрителей:**
1. Регистрация и согласие на обработку персональных данных.
2. Отправка загадок через систему.
3. Просмотр статуса своей загадки.

**Для операторов:**
1. Проверка корректности данных телезрителей.
2. Управление заявками на загадки.

**Для специалистов по загадкам:**
1. Оценка корректности загадок и ответов.
2. Установка уровня сложности загадок.

**Для ведущего:**
1. Выбор загадок для игры.
2. Отметка результатов игры.

**Общие функции:**
1. Защита конфиденциальности данных телезрителей.
2. Интуитивный и удобный интерфейс для всех пользователей.
3. Гарантированная работоспособность и минимальное количество сбоев.

## 2.4 Бизнес-риски, предположения и зависимости
### Риски, которые могут не позволить достичь поставленных целей:
1. **Недостаточный интерес телезрителей:** риск того, что телезрители могут не проявить достаточного интереса к участию в игре, что снизит популярность шоу и эффективность системы.
2. **Конкуренция:** наличие других телешоу или развлекательных программ может отвлечь внимание зрителей, что повлияет на рейтинги и успешность проекта.
3. **Финансовые риски:** расходы на разработку и внедрение системы могут превысить бюджет, что повлияет на финансовую устойчивость проекта.
4. **Сроки разработки:** задержки в разработке и внедрении системы могут привести к пропуску ключевых эфиров или потере интереса зрителей.
5. **Несоответствие ожиданиям пользователей:** телезрители, операторы, специалисты по загадкам и ведущий могут быть не удовлетворены функциональностью или удобством системы, что вызовет негативные отзывы.
6. **Уровень безопасности данных:** если система не обеспечит должный уровень безопасности данных телезрителей, это может вызвать юридические проблемы и потерю доверия.
7. **Изменение требований:** бизнес-требования могут измениться в ходе разработки, что потребует дополнительных ресурсов и времени для адаптации системы.
8. **Смена руководства:** смена владельцев или руководства проекта может привести к изменениям в условиях разработки или отмене проекта.
9. **Зависимость от ключевых сотрудников:** уход ключевых сотрудников или их недоступность может замедлить или остановить разработку.
10. **Непредвиденные обстоятельства:** неожиданные события, такие как технические сбои или изменения в расписании телеканала, могут повлиять на выполнение проекта.
11. **Изменения в законодательстве:** изменения в законах, связанные с обработкой персональных данных, могут потребовать доработки системы.
### На старте проекта были сделаны следующие предположения:
1. Предполагается, что телешоу «Загадки» соблюдает все законодательные нормы и требования в отношении обработки персональных данных телезрителей.
2. Предполагается, что телезрители будут активно участвовать в игре, отправляя загадки и следя за эфиром.
3. Предполагается, что пользователи (телезрители, операторы, специалисты по загадкам и ведущий) ценят удобство и функциональность системы.
4. Предполагается, что система обеспечит высокий уровень безопасности данных телезрителей.
5. Предполагается, что после обучения персонал будет готов эффективно использовать систему.
### Зависимости, которые необходимо учесть на старте:
1. **Зависимость от поставщиков технологий:** использование сторонних технологий, библиотек или серверов может повлиять на успешность проекта. Необходимо учитывать возможные изменения в условиях сотрудничества с поставщиками.
2. **Зависимость от бюджета и финансирования:** для успешной реализации проекта необходимо обеспечить финансирование на разработку, внедрение и поддержку системы.
3. **Зависимость от требований заказчика и пользователей:** изменения в требованиях могут потребовать пересмотра и доработки функционала системы.
### Открытые вопросы и гипотезы, требующие тщательного исследования:
1. **Безопасность данных:**
    - Вопрос: какие точные требования безопасности данных необходимо выполнить, чтобы обеспечить конфиденциальность данных телезрителей?
    - Гипотеза: соблюдение высоких стандартов безопасности данных является критическим аспектом проекта и способствует доверию пользователей.
2. **Удовлетворенность пользователей:**
    - Вопрос: какие функциональные возможности системы наиболее важны для пользователей, и какие аспекты использования системы требуют улучшения?
    - Гипотеза: удобное и функциональное приложение обеспечит положительную обратную связь от пользователей.
3. **Эффективность участия телезрителей:**
    - Вопрос: какие функции системы будут наиболее востребованы телезрителями для участия в игре?
    - Гипотеза: предоставление удобного интерфейса для отправки загадок и отслеживания их статуса улучшит опыт пользователей.
4. **Сроки разработки и внедрения:**
    - Вопрос: какие могут возникнуть задержки или проблемы в ходе разработки и внедрения системы, и какие меры будут приняты для их устранения?
    - Гипотеза: реализация системы потребует строгого управления сроками и ресурсами.
5. **Масштабируемость системы:**
    - Вопрос: как система будет масштабироваться с ростом числа пользователей и объема данных, и какие дополнительные ресурсы потребуются?
    - Гипотеза: масштабируемость необходима для обеспечения стабильной работы системы при росте популярности шоу.
6. **Зависимость от сторонних сервисов:**
    - Вопрос: какие сторонние сервисы и API могут потребоваться для полной функциональности системы, и какие риски связаны с их использованием?
    - Гипотеза: использование надежных сторонних сервисов может улучшить функциональность системы.

# Рамки и ограничения проекта
## 2.5 Основные функции в порядке приоритета
### Must Do (Обязательно):
1. **Регистрация заявки на сайте для телезрителя:** телезрители должны иметь возможность легко отправлять свои загадки через систему, включая необходимые данные (ФИО, контактные данные).
2. **Возможность ознакомиться с результатом обработки заявки для телезрителей:** телезрители должны получать уведомления о статусе своей заявки (принята, отклонена).
3. **Просмотр результатов раунда для телезрителей, чьи загадки были разыграны:** телезрители должны иметь возможность видеть, как их загадки использовались в игре и кто победил в раунде.
4. **Вход с учетом ролей и прав доступа для операторов, специалистов по загадкам и телеведущих:** система должна обеспечивать разделение прав доступа для разных ролей пользователей.
5. **Проверка и корректировка заявок операторами:** операторы должны иметь возможность проверять корректность данных телезрителей и, при необходимости, минимально корректировать заявки (например, исправление опечаток в ФИО или контактных данных), если данные можно восстановить.
6. **Оценка загадок специалистами по загадкам:** специалисты должны иметь возможность проверять корректность загадок и устанавливать их уровень сложности.
7. **Управление процессом игры для телеведущего:** ведущий должен иметь возможность запускать процесс отбора загадок для игры и отмечать результаты.
### Should Do (Желательно):
1. **Реализация возможности отклонить загадку в ходе игры для телеведущего:** ведущий должен иметь возможность отклонять загадки, если они не подходят для игры.
2. **Управление базой загадок:** система должна позволять операторам и специалистам управлять базой загадок, включая добавление, редактирование и удаление загадок.
### Could Do (Можно):
1. **Онлайн-поддержка пользователей:** реализация системы онлайн-поддержки для помощи телезрителям и другим пользователям.
2. **Аналитика и отчетность:** создание инструментов для анализа данных о загадках и результатах игры.
3. **Интеграция с телевизионным эфиром:** автоматизация процесса отображения загадок и результатов на экране.
### Won’t Do (Не будем делать в рамках текущей поставки):
1. **Интеграция со сторонними сервисами и платформами:** например, интеграция с социальными сетями или другими телевизионными платформами.
2. **Создание личного кабинета на сайте для телезрителя:** в текущей версии системы личный кабинет для телезрителей не предусмотрен.
3. **Расширенные инструменты для анализа данных:** создание сложных аналитических инструментов для глубокого анализа данных.
4. **Разработка мобильного приложения:** в текущей версии системы достаточно адаптивной веб-версии.

## 2.6 Объем первоначальной и последующих версий
Для определения объема версий информационной системы для телешоу «Загадки», учитывая фреймворк MoSCoW и концепцию продукта, выделим следующие версии:
### Первая версия (MVP):
1. **Регистрация заявки на сайте для телезрителя:** телезрители должны иметь возможность легко отправлять свои загадки через систему, включая необходимые данные (ФИО, контактные данные).
2. **Возможность ознакомиться с результатом обработки заявки для телезрителей:** телезрители должны получать уведомления о статусе своей заявки (принята, отклонена).
3. **Просмотр результатов раунда для телезрителей, чьи загадки были разыграны:** телезрители должны иметь возможность видеть, как их загадки использовались в игре и кто победил в раунде.
4. **Вход с учетом ролей и прав доступа для операторов, специалистов по загадкам и телеведущих:** система должна обеспечивать разделение прав доступа для разных ролей пользователей.
5. **Проверка и корректировка заявок операторами:** операторы должны иметь возможность проверять корректность данных телезрителей и, при необходимости, минимально корректировать заявки (например, исправление опечаток в ФИО или контактных данных), если данные можно восстановить.
6. **Оценка загадок специалистами по загадкам:** специалисты должны иметь возможность проверять корректность загадок и устанавливать их уровень сложности.
7. **Управление процессом игры для телеведущего:** ведущий должен иметь возможность запускать процесс отбора загадок для игры и отмечать результаты.
8. **Реализация возможности отклонить загадку в ходе игры для телеведущего:** ведущий должен иметь возможность отклонять загадки, если они не подходят для игры.

Определение конкретного объема каждой версии и их временные рамки будут проводиться в тесном сотрудничестве с заказчиком и стейкхолдерами проекта с учетом бизнес-приоритетов и доступных ресурсов. Главной целью MVP (первой версии) является быстрое внедрение базовой функциональности, необходимой для успешного старта системы, а затем поэтапное расширение функциональности в более поздних версиях.

### Вторая версия:
1. **Управление базой загадок:** система должна позволять операторам и специалистам управлять базой загадок, включая добавление, редактирование и удаление загадок.
2. **Улучшение интерфейса для телезрителей:** добавление более удобного и интуитивного интерфейса для отправки загадок и просмотра результатов.
3. **Интеграция с телевизионным эфиром:** автоматизация процесса отображения загадок и результатов на экране.
### Третья версия и далее:
1. **Создание личного кабинета на сайте для телезрителя:** в текущей версии системы личный кабинет для телезрителей не предусмотрен.
2. **Аналитика и отчетность:** создание инструментов для анализа данных о загадках и результатах игры.
3. **Интеграция со сторонними сервисами и платформами:** например, интеграция с социальными сетями или другими телевизионными платформами.
4. **Создание личного кабинета на сайте для телезрителя:** в текущей версии системы личный кабинет для телезрителей не предусмотрен.
5. **Разработка мобильного приложения:** в текущей версии системы достаточно адаптивной веб-версии.

Но этот функционал уже не в приоритете.

## 2.7 Ограничения и исключения
### Требования к реализации:
1. **Интерфейс веб-приложения должен соответствовать корпоративным гайдлайнам телешоу «Загадки», включая цветовую схему и структуру страниц.** Дизайн должен быть интуитивно понятным и удобным для пользователей, чтобы обеспечить положительный опыт взаимодействия с системой.
2. **Информационная система должна обеспечивать высокий уровень безопасности данных телезрителей и соблюдать стандарты защиты персональной информации.** Это включает соблюдение законодательных норм.
3. **Приложение должно работать стабильно и быстро даже при больших нагрузках.** Задержки и сбои в работе приложения могут негативно повлиять на опыт телезрителей и участников игры, особенно во время прямого эфира.
### Ограничения и исключения:
1. **В первой версии продукта (MVP) не будут реализованы дополнительные функции, не связанные с основными целями системы.** Это включает в себя любые дополнительные запросы на разработку, которые могут появиться после начала работы над проектом.
2. **Информационная система будет ориентирована на управление загадками и процессом игры.** Система не будет поддерживать функции, не связанные с проведением телешоу, такие как интеграция с социальными сетями или создание личного кабинета для телезрителей.
3. **Система будет обеспечивать разграничение прав доступа в зависимости от ролей пользователей.** Например, технический персонал, не имеющий отношения к игре, не будет иметь доступ к системе.
4. **Система будет доступна на русском языке.** Поддержка других языков не предусмотрена в текущей версии.
5. **Система будет поддерживать совместимость с современными браузерами и операционными системами**, но не будет поддерживать устаревшие или нестандартные конфигурации.

# 3. Функциональные и нефункциональные требования

# 3.1. Функциональные требования
## Use Case 1: Прием заявок
**Цель:** Направить заявку на рассмотрение.
**Акторы:**
- Пользователь - Зритель.
- Система - Сайт для регистрации на шоу «Мир загадок».
**Предусловия:** Открыт набор заявок на участие в шоу в качестве зрителя.

**Основной поток:**
1. Пользователь заходит на сайт.
2. Система с помощью кнопки предлагает зрителю зарегистрировать заявку на участие.
3. Пользователь кликает на кнопку для регистрации.
4. Система показывает форму для регистрации.
5. Пользователь вводит необходимые данные, подтверждает передачу персональных данных и с помощью кнопки отправляет заявку на рассмотрение.
6. Система направляет заявку на рассмотрение и фиксирует ее в базе данных.

**Альтернативные потоки:**
- Если пользователь вводит данные в неверном формате/оставляет обязательные поля незаполненными/не дает согласие на обработку персональных данных, система подсвечивает неверно заполненные/незаполненные поля и предлагает исправить.
- Если заявка содержит запрещенные регламентом шоу слова, сайт выводит сообщение о том, что содержимое заявки некорректно, и предлагает исправить.

**Постусловия:** Заявка создана и направлена на рассмотрение.

**Исключения:**
- Если сайт недоступен из-за технической ошибки, система выводит сообщение с предложением зайти позднее.
- Если пользователь отказывается дать согласие на обработку персональных данных, система уведомляет пользователя, что не может в таком случае обработать его заявку, и предлагает дать согласие.

## Use Case 2: Обработка заявок
**Цель:** Обработать заявку и передать информацию на следующий этап.
**Акторы:**
- Пользователь - Оператор.
- Система «Мир загадок».
**Предусловия:** Оператор авторизован в системе; в системе есть заявки со статусом «Получена».

**Основной поток:**
1. Оператор заходит в систему в раздел «Заявки на обработку».
2. Система отображает контекстное меню.
3. Оператор выбирает «Последовательная проверка».
4. Система отображает одну необработанную заявку.
5. Оператор проверяет и подтверждает корректность данных.
6. Система устанавливает статус заявки «Обработана» и направляет заявку на следующий этап проверки.
7. Алгоритм повторяется, начиная с шага №4, пока оператор не закончит проверку или не выйдет из режима «Последовательная проверка».

**Альтернативные потоки:**
- Если зритель указал данные некорректно, оператор отклоняет заявку, система меняет статус заявки на «Отклонена» и направляет уведомление телезрителю.
- Если данные указаны в неверном формате (например, Фамилия в поле для Имени и наоборот), но целостность данных можно восстановить, оператор корректирует необходимые данные.
- Если оператору необходимо проверить конкретную заявку, он открывает контекстное меню и выбирает «Все заявки». Оператор находит необходимую заявку и при необходимости корректирует данные.

**Постусловия:** Заявки обработаны и направлены на следующий этап рассмотрения со статусом «Обработана».

**Исключения:**
- Если система недоступна из-за технической ошибки, уведомить оператора и предложить через специальную форму направить обращение техническому специалисту.

## Use Case 3: Проверка загадки на корректность
**Цель:** Проверить корректность заявки и передать ее на следующий этап.
**Акторы:**
- Пользователь - Специалист по загадкам (далее Специалист).
- Система «Мир загадок».
**Предусловия:** Специалист авторизован в системе; в системе есть заявки со статусом «Обработана».

**Основной поток:**
1. Специалист заходит в систему в раздел «Заявки на проверку».
2. Система отображает контекстное меню.
3. Специалист выбирает «Последовательная проверка».
4. Система отображает одну непроверенную заявку.
5. Специалист проверяет и подтверждает корректность данных, загадки и ответа.
6. Система устанавливает статус заявки «Проверена» и фиксирует загадку с ответом в Базе загадок со статусом «Не классифицирована».
7. Алгоритм повторяется, начиная с шага №4, пока специалист не закончит проверку или не выйдет из режима «Последовательная проверка».

**Альтернативные потоки:**
- Если зритель указал данные некорректно, специалист отклоняет заявку, система меняет статус заявки на «Отклонена» и направляет уведомление телезрителю.
- Если специалисту необходимо проверить конкретную заявку, он открывает контекстное меню и выбирает «Все заявки». Специалист находит необходимую заявку и при необходимости корректирует данные.
- Если загадка и ответ перепутаны местами, но целостность данных можно восстановить, специалист корректирует необходимые данные.

**Постусловия:** Заявки проверены и помечены статусом «Проверена»; загадки направлены в Базу загадок со статусом «Не классифицирована».

**Исключения:**
- Если система недоступна из-за технической ошибки, уведомить специалиста и предложить через специальную форму направить обращение техническому специалисту.

## Use Case 4: Классификация загадок по уровню сложности
**Цель:** Классифицировать загадку.
**Акторы:**
- Пользователь - Специалист по загадкам (далее Специалист).
- Система «Мир загадок».
**Предусловия:** Специалист авторизован в системе; в системе есть загадки со статусом «Не классифицирована».

**Основной поток:**
1. Специалист заходит в систему в раздел «Загадки на классификацию».
2. Система отображает контекстное меню.
3. Специалист выбирает «Последовательная проверка».
4. Система отображает одну неклассифицированную загадку.
5. Специалист устанавливает уровень сложности загадки (Легкая, Средняя или Сложная), опираясь на «Правила классификации загадок по уровням».
6. Система устанавливает статус загадки «Классифицирована» и фиксирует установленную сложность загадки.
7. Алгоритм повторяется, начиная с шага №4, пока специалист не закончит классификацию или не выйдет из режима «Последовательная проверка».

**Альтернативные потоки:**
- Если загадка не подходит под правила классификации загадок по уровням, специалист устанавливает для загадки Неизвестный уровень сложности.
- Если специалисту необходимо проверить конкретную загадку, он открывает контекстное меню и выбирает «Все загадки». Специалист находит необходимую загадку и при необходимости корректирует данные.

**Постусловия:** Статус загадок установлен «Классифицирована», их установленная сложность зафиксирована в Базе загадок.

**Исключения:**
- Если система недоступна из-за технической ошибки, уведомить оператора и предложить через специальную форму направить обращение техническому специалисту.

## Use Case 5: Отбор загадок на игру
**Цель:** Отобрать загадки на игру в прямом эфире.
**Акторы:**
- Пользователь - Ведущий.
- Система «Мир загадок».
**Предусловия:** Ведущий авторизован в системе; в системе есть минимум 13 загадок со статусами «Классифицирована» и «В резерве».

**Основной поток:**
1. Ведущий заходит в систему в раздел «Отбор загадок» и запускает процесс отбора загадок на игру.
2. Система выгружает из Базы загадок загадки со статусом «Классифицирована» и автоматизированно выбирает 13 загадок на игру (4 сложных, 4 средних, 4 простых и 1 неизвестного уровня). Их статус меняется на «Отобрана для игры».
3. Система показывает ведущему выбранные загадки.
4. Ведущий принимает окончательное решение по загадке и, если она подходит, разыгрывает ее.
5. Ведущий указывает победителя раунда.
6. Система автоматически меняет статус загадки на «Разыграна».
7. Алгоритм повторяется, начиная с шага №4, пока одна из команд не наберет 7 очков.

**Альтернативные потоки:**
- Если ведущий принимает решение, что загадка не подходит, система автоматически устанавливает статус загадки «В резерве» и заменяет отклоненную загадку.
- Если загадка была отобрана для игры, но не была разыграна, после окончания игры ее статус автоматически меняется на «Классифицирована».
- Если загадок необходимого уровня со статусом «Классифицирована» недостаточно, система также использует загадки со статусом «В резерве».
- Если загадок со статусами «Классифицирована» и «В резерве» необходимого уровня сложности недостаточно, система может использовать загадку другого уровня сложности.

**Постусловия:** Загадки отобраны и утверждены ведущим, их статус изменен.

**Исключения:**
- Если система недоступна из-за технической ошибки, уведомить ведущего.

## Use Case 6: Проведение игры
**Цель:** Провести игру и определить победителя.
**Акторы:**
- Ведущий.
- Система «Мир загадок».
- Команда телезрителей и команда игроков.
**Предусловия:** Ведущий авторизован в системе; в системе есть загадки со статусом «Классифицирована»; пятница, начало телешоу.

**Основной поток:**
1. Ведущий объявляет начало шоу и представляет команду игроков.
2. Система выводит на экран интерактивную презентацию игроков и ведущего.
3. Ведущий с помощью системы отбирает загадку в прямом эфире и зачитывает ее.
4. Команда игроков методом мозгового штурма ищет правильный ответ в течение 2-х минут и дает ответ.
5. Когда команда игроков дает ответ, ведущий объявляет и фиксирует в системе победителя раунда.
6. Алгоритм повторяется с шага №1, пока одна из команд не набирает 7 очков.
7. Ведущий подводит итоги игры и завершает шоу.

**Альтернативные потоки:**
- Если команда игроков не дает ответ или дает неправильный ответ, ведущий объявляет и фиксирует в системе, что в раунде победила команда телезрителей.
- Если игра не укладывается во временные рамки и может закончиться раньше или позже назначенного времени, ведущий во время рекламного перерыва согласовывает со съемочной командой, что он ускорит темп игры или займет время импровизацией.

**Постусловия:** Игра проведена, итоги подведены.

**Исключения:**
- Если система недоступна из-за технической ошибки, она выводит сообщение о технической ошибке.

## Use Case 7: Оповещение телезрителей
**Цель:** Оповестить телезрителей-авторов загадок об итогах раунда.
**Акторы:**
- Система «Мир загадок».
- Телезритель-автор загадки (далее Телезритель).
**Предусловия:** Загадка телезрителя разыграна.

**Основной поток:**
1. Система получает информацию о победителе раунда и формирует уведомление телезрителю.
2. Система направляет уведомление на контактные данные, которые телезритель указал при регистрации заявки.

**Альтернативные потоки:**
- Если телезритель указал недействительные контактные данные, система осуществляет повторную попытку уведомления через 24 часа.

**Постусловия:** Телезритель уведомлен об итогах игры.

**Исключения:**
- Если система недоступна из-за технической ошибки, она уведомляет технического специалиста о невозможности направить уведомление.

# 3.2. Нефункциональные требования
(требования приведены в порядке убывания приоритета)
### Безопасность данных
- **Требование и обоснование**: Система должна соответствовать стандартам безопасности данных и обеспечивать безопасное хранение данных. Это способствует доверию пользователей и минимизации рисков нарушения конфиденциальности информации.
- **Способы замера**: Обнаружение проблемы должно занимать не более часа, реагирование - сразу после обнаружения, решение проблемы - в течение 5 часов. Это означает, что с момента обнаружения инцидента (например, несанкционированного доступа или утечки данных), система должна полностью восстановиться в течение 5 часов. При превышении этого времени инцидент считается вышедшим из-под контроля.
### Производительность приложения
- **Требование и обоснование**: Система должна обеспечивать отклик в пределах 2-4 секунд для основного функционала веб-приложения. Это повысит уровень удовлетворения пользователей.
- **Способы замера**: нужно мониторить отклик системы в реальном времени и использовать нагрузочное тестирование с оценкой производительности при разной нагрузке, включая пиковые нагрузки. Итого: максимальное время отклика для всех операций не должно превышать 4 секунд.
### Совместимость
- **Требование и обоснование**: Система должна быть совместима с используемым в компании веб-браузером Yandex. Это требование гарантирует, что система будет доступна и работоспособна, что способствует ее успешной реализации.
- **Способы замера**: Для проверки совместимости системы с корпоративной средой будет проводиться тестирование в указанном браузере с использованием ОС Windows 10. Система считается совместимой, если все основные функции работают без ошибок.

# 4. Сценарии

## Use Case диаграмма

![/docs/use_case.png]

# 5. Бизнес-процессы

## 5.1. Бизнес-процесс процесса приема и обработки заявки от телезрителя

![Прием и обработка заявок с загадкой, классификация загадки по уровню сложности (1)](https://github.com/user-attachments/assets/a51f2f49-6d15-4fe0-9d05-82c4484f94d0)


## 5.2. Бизнес-процесс классификации загадок по уровням сложности

![Классификация загадки по уровню сложности](https://github.com/user-attachments/assets/9deec037-1b73-44f2-b94f-60a4307bdc07)


## 5.3. Бизнес-процесс отбора загадок на игру в прямом эфире

![Процесс отбора загадок на игру в прямом эфире](https://github.com/user-attachments/assets/b85fd96d-40e7-4432-9964-045e890fe029)


## 5.4. Бизнес-процесс оповещения телезрителей, чьи загадки были разыграны

![Оповещение телезрителя](https://github.com/user-attachments/assets/99e19b33-7132-468d-98e8-b1b295ee0cf7)


# 6. UML-диаграммы

## 6.1. Диаграмма состояний заявки

![заявка drawio](https://github.com/user-attachments/assets/f19f7d4a-3a22-4bbc-8b8f-4e931b707af3)


## 6.2. Диаграмма состояний загадки

![загадка drawio](https://github.com/user-attachments/assets/02b1215e-7904-43f9-be2b-a41ef4a45eb4)


## 6.3. Диаграмма активности для алгоритма выбора загадок для игры

![Диаграмма активности](https://github.com/user-attachments/assets/d12885b7-6da4-4d4b-821f-7dd48a97668a)


# 7. Постановка для фронтенда

Для выполнения задания были выбраны две логические группы: отправка заявки телезрителем и проверка заявок операторами и специалистами.

Под выбранные группы были спроектированы низкодетализированные макеты экранов.

## 7.1 Макеты интерфейсов телезрителей

![Frame 2](https://github.com/user-attachments/assets/93ec3281-2803-40f1-b8f5-27579d42a172)
*Рисунок 7.1. Главная страница сайта для регистрации на телешоу*

При нажатии на кнопку “Зарегистрироваться” появляется форма для регистрации (Рисунок 7.2).

![Frame 3](https://github.com/user-attachments/assets/ead8664c-98b7-4042-a42f-eed3bdca14b0)
*Рисунок 7.2. Всплывающая форма регистрации*

## 7.2 Макеты интерфейсов работников телешоу

![Frame 4](https://github.com/user-attachments/assets/cabc2f2b-7508-4aae-b3f0-844e732d4a34)
*Рисунок 7.3. Раздел "Последовательная проверка"*

При необходимости оператор/специалист по загадкам может обратиться ко всем заявкам (Рисунок 7.4), открыв соответствующий раздел через боковое меню.

![Frame 5](https://github.com/user-attachments/assets/255ce146-de13-4dca-a3fb-2f5755ecf437)
*Рисунок 7.4. Раздел "Все заявки/загадки"*

# 8. Проектирование REST API

## 8.1 REST API взаимодействие
**Сценарий:** Управление заявками, загадками, играми и регистрацией телезрителей через RESTful API для телевизионной игры «Загадки».  
**Технология:** HTTP с использованием JSON для обмена данными.

## 8.2 Обоснование выбора технологии
**HTTP с RESTful API** — это оптимальное решение для управления сущностями системы (телезрители, заявки, загадки, игры), где требуется централизованный доступ к данным и поддержка CRUD-операций.

REST API подходит для данного проекта, так как:
- Поддерживает стандартизированный обмен данными в формате JSON, что упрощает интеграцию с фронтендом и другими сервисами.
- Использует HTTP-методы (GET, POST, PATCH), что обеспечивает интуитивно понятное управление ресурсами.
- Легко масштабируется и документируется с помощью OpenAPI, что важно для дальнейшего развития системы.
- Позволяет интегрироваться с асинхронной системой уведомлений (например, через RabbitMQ), инициируя отправку сообщений после изменения состояния ресурсов.

В сравнении с GraphQL, который требует более сложной настройки и подходит для гибких запросов, REST API проще в реализации и достаточно для текущих требований системы, где структура запросов и ответов предопределена.

## 8.3 OpenAPI спецификация
Спецификация OpenAPI версии 3.0.0 для REST API системы «Загадки», управляющего заявками, загадками, играми и регистрацией телезрителей.  
### Листинг 9.1 - OpenAPI yaml:
```yaml
openapi: 3.0.0
info:
  title: REST API для системы «Загадки»
  version: 1.0.0
  description: RESTful API для управления заявками, загадками и играми в телевизионной игре «Загадки», согласованное с ERD и схемой базы данных.

servers:
  - url: http://localhost:3000
    description: Локальный сервер

paths:
  /viewers:
    post:
      summary: Регистрация нового телезрителя
      description: Создает нового телезрителя с обязательным согласием на обработку данных.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                lastName:
                  type: string
                  maxLength: 50
                  description: Фамилия телезрителя
                firstName:
                  type: string
                  maxLength: 50
                  description: Имя телезрителя
                middleName:
                  type: string
                  maxLength: 50
                  nullable: true
                  description: Отчество телезрителя (опционально)
                contactInfo:
                  type: string
                  maxLength: 100
                  description: Контактные данные (например, email), уникальное значение
                consent:
                  type: boolean
                  description: Согласие на обработку персональных данных
              required:
                - lastName
                - firstName
                - contactInfo
                - consent
      responses:
        '201':
          description: Телезритель успешно зарегистрирован
          content:
            application/json:
              schema:
                type: object
                properties:
                  viewerId:
                    type: integer
                    description: Идентификатор нового телезрителя
        '400':
          description: Неверный запрос (например, отсутствие согласия или дубликат contactInfo)
        '409':
          description: Конфликт (contactInfo уже существует)

  /applications:
    post:
      summary: Создание новой заявки с загадкой
      description: Телезритель подает заявку с загадкой. Инициирует уведомление через RabbitMQ.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                viewerId:
                  type: integer
                  description: Идентификатор телезрителя
                text:
                  type: string
                  maxLength: 100
                  description: Текст загадки
                answer:
                  type: string
                  maxLength: 255
                  description: Правильный ответ на загадку
              required:
                - viewerId
                - text
                - answer
      responses:
        '201':
          description: Заявка успешно создана
          content:
            application/json:
              schema:
                type: object
                properties:
                  applicationId:
                    type: integer
                    description: Идентификатор созданной заявки
                  status:
                    type: string
                    enum: [received, processed, verified, rejected]
                    description: Статус заявки
        '400':
          description: Неверный запрос (например, отсутствуют обязательные поля)
        '404':
          description: Телезритель не найден

    get:
      summary: Получение списка заявок
      parameters:
        - name: viewerId
          in: query
          required: false
          schema:
            type: integer
          description: Фильтр по идентификатору телезрителя
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum: [received, processed, verified, rejected]
          description: Фильтр по статусу заявки
      responses:
        '200':
          description: Успешный ответ
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    applicationId:
                      type: integer
                    viewerId:
                      type: integer
                    riddleId:
                      type: integer
                      nullable: true
                    registrationDate:
                      type: string
                      format: date
                      description: Дата регистрации заявки
                    status:
                      type: string
                      enum: [received, processed, verified, rejected]

  /applications/{id}:
    patch:
      summary: Обновление статуса заявки
      description: Оператор или специалист обновляет статус заявки. Инициирует уведомление через RabbitMQ.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [received, processed, verified, rejected]
                  description: Новый статус заявки
                specialistId:
                  type: integer
                  description: Идентификатор специалиста, обновляющего статус
              required:
                - status
                - specialistId
      responses:
        '200':
          description: Статус успешно обновлен
          content:
            application/json:
              schema:
                type: object
                properties:
                  applicationId:
                    type: integer
                  status:
                    type: string
                    enum: [received, processed, verified, rejected]
        '404':
          description: Заявка или специалист не найдены

  /riddles/{id}:
    patch:
      summary: Обновление статуса и сложности загадки
      description: Специалист классифицирует загадку. Инициирует уведомление через RabbitMQ.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [not_classified, classified, selected_for_game, played, in_reserve]
                  description: Новый статус загадки
                difficulty:
                  type: string
                  enum: [easy, medium, hard, unknown]
                  description: Уровень сложности загадки
                specialistId:
                  type: integer
                  description: Идентификатор специалиста, обновляющего данные
              required:
                - status
                - difficulty
                - specialistId
      responses:
        '200':
          description: Загадка успешно обновлена
          content:
            application/json:
              schema:
                type: object
                properties:
                  riddleId:
                    type: integer
                  status:
                    type: string
                    enum: [not_classified, classified, selected_for_game, played, in_reserve]
                  difficulty:
                    type: string
                    enum: [easy, medium, hard, unknown]
        '404':
          description: Загадка или специалист не найдены

  /games:
    post:
      summary: Создание новой игры
      description: Ведущий создает новую игру.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                date:
                  type: string
                  format: date
                  description: Дата проведения игры
                hostId:
                  type: integer
                  description: Идентификатор ведущего
              required:
                - date
                - hostId
      responses:
        '201':
          description: Игра успешно создана
          content:
            application/json:
              schema:
                type: object
                properties:
                  gameId:
                    type: integer
                    description: Идентификатор созданной игры
        '404':
          description: Ведущий не найден
```

## 8.4 Возможные варианты JSON для используемой спецификации
### Листинг 8.1 - Регистрация нового телезрителя (POST /viewers):
**Запрос**:
```json
{
  "lastName": "Иванов",
  "firstName": "Иван",
  "middleName": "Иванович",
  "contactInfo": "ivanov@example.com",
  "consent": true
}
```
**Ответ**:
```json
{
  "viewerId": 7426582
}
```

### Листинг 8.2 - Создание новой заявки (POST /applications):
**Запрос**:
```json
{
  "viewerId": 7426582,
  "text": "Что всегда впереди, но никогда не приходит?",
  "answer": "Будущее"
}
```
**Ответ**:
```json
{
  "applicationId": 12345,
  "status": "received"
}
```

### Листинг 8.3 - Обновление статуса заявки (PATCH /applications/{id}):
**Запрос** (для `id = 12345`):
```json
{
  "status": "verified",
  "specialistId": 1
}
```
**Ответ**:
```json
{
  "applicationId": 12345,
  "status": "verified"
}
```

### Листинг 8.4 - Классификация загадки (PATCH /riddles/{id}):
**Запрос** (для `id = 67890`):
```json
{
  "status": "classified",
  "difficulty": "medium",
  "specialistId": 2
}
```
**Ответ**:
```json
{
  "riddleId": 67890,
  "status": "classified",
  "difficulty": "medium"
}
```

### Листинг 8.5 - Создание новой игры (POST /games):
**Запрос**:
```json
{
  "date": "2025-03-14",
  "hostId": 1
}
```
**Ответ**:
```json
{
  "gameId": 54321
}
```

9. Проектирование асинхронного взаимодействия

## 9.1 Асинхронное взаимодействие
**Сценарий:** Рассылка уведомлений телезрителям о статусе их заявок и результатах раундов.
**Технология:** RabbitMQ.

## 9.2 Обоснование выбора технологии
**RabbitMQ** — это оптимальное решение для сценариев, где требуется обработка относительно небольшого количества сообщений, а порядок их доставки не критичен.

В случае рассылки уведомлений телезрителям (например, о статусе заявки или результатах раунда), RabbitMQ подходит идеально, так как:
- Сообщения небольшие (текстовые уведомления).
- Гарантии доставки "at-most-once" или "at-least-once" достаточны для данного сценария.
- RabbitMQ прост в настройке и управлении, что делает его удобным для задач, где важна надежность и простота доставки сообщений.

В сравнении с Kafka, который ориентирован на обработку больших объемов данных и потоков событий, RabbitMQ более легковесен и подходит для задач, не требующих высокой пропускной способности.

## 9.3 AsyncAPI yaml
Спецификация AsyncAPI версии 2.3.0 для сервиса уведомлений телезрителей, использующего RabbitMQ.
### Листинг 9.1 - AsyncAPI yaml:
``` yaml
asyncapi: 2.3.0
info:
  title: Сервис уведомлений для телешоу
  version: 1.0.0
  description: AsyncAPI спецификация для сервиса уведомлений телезрителей, использующего RabbitMQ.

channels:
  viewerNotifications:
    subscribe:
      summary: Канал для отправки уведомлений телезрителям
      operationId: sendViewerNotification
      message:
        name: viewerNotification
        payload:
          type: object
          properties:
            viewerId:
              type: integer
              description: Идентификатор телезрителя в виде целого числа
            notificationType:
              type: string
              enum: [application_status, round_result]
              description: Тип уведомления (статус заявки, результат раунда)
            subject:
              type: string
              description: Тема уведомления
            body:
              type: string
              description: Содержание уведомления
      bindings:
        amqp:
          contentType: "application/json"
```
## 9.4. Возможные варианты json для используемой спецификации:
### Листинг 9.2 - Уведомление о статусе заявки:
```json
{
  "viewerId": 7426582,
  "notificationType": "application_status",
  "subject": "Статус вашей заявки",
  "body": "Ваша заявка на участие в игре была принята. Ожидайте дальнейших инструкций."
}
```
### Листинг 9.3 - Уведомление о победе в раунде:
```json
{
  "viewerId": 1415845,
  "notificationType": "round_result",
  "subject": "Поздравляем!",
  "body": "Вы стали победителем раунда! Ваша загадка была успешно разгадана."
}
```

# 10. Проектирование моделей данных

## 10.1. Концептуальная модель

Определим связи между сущностями:
- **Зритель (Viewer)** - **Заявка (Application)**: Связь один ко многим (One-to-Many). Один зритель может оставить множество заявок.
- **Заявка (Application)** - **Загадка (Riddle)**: Связь один к одному (One-to-One). Одна заявка содержит одну загадку.
- **Игра (Game)** - **Загадка (Riddle)**: Связь один ко многим (One-to-Many). Одна игра содержит множество загадок.
- **Ведущий (Host)** - **Игра (Game)**: Связь один ко многим (One-to-Many). Один ведущий может проводить множество игр.
- **Заявка (Application)** - **Специалист (Specialist)**: Связь многие ко многим (Many-to-many). Специалист может проверить множество заявок, а заявка может быть проверена множеством специалистов.  
	Создадим вспомогательную сущность **Проверка заявки (Application check)** и получим две связи:
    - **Заявка (Application)** - **Проверка заявки (Application check):** Связь один ко многим (One-to-Many). Одна заявка может проходить множество проверок.
    - **Специалист (Specialist)** - **Проверка заявки (Application check):** Связь один ко многим (One-to-Many). Один специалист может проводить множество проверок заявок.
- **Загадка (Riddle)** - **Специалист (Specialist)**: Связь многие ко многим (Many-to-many). Специалист может проверить множество загадок, а загадка может быть проверена множеством специалистов.  
    Создадим вспомогательную сущность **Проверка загадки (Riddle check)** и получим две связи:
    - **Загадка (Riddle)** - **Проверка загадки (Riddle check):** Связь один ко многим (One-to-Many). Одна загадка может проходить множество проверок.
    - **Специалист (Specialist)** - **Проверка загадки (Riddle check):** Связь один ко многим (One-to-Many). Один специалист может проводить множество проверок загадок.


*Рисунок 10.1. Концептуальная модель*

## 10.2. Логическая модель


*Рисунок 10.2. Логическая модель*

*Таблица 10.1. Определение атрибутов сущностей*
